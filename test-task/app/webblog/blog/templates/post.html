{% extends 'base.html' %}

{% block content %}
    <div class="col-md-9">
        <h1 class="text-center">{{ post.title }}</h1>
        {% for tag in post_tags %}
            <a href="/tag/{{ tag.title }}/" class="badge badge-info">{{ tag.title }}</a>
        {% endfor %}
        <p class="text-justify text-monospace mt-3 border-bottom">{{ post.content }}</p>
        {% if user.is_authenticated %}
            <a href="/post/{{ post.pk }}/edit/" class="btn btn-primary btn-lg btn-block">Update post</a>
        {% endif %}
        {% load crispy_forms_tags %}
        <h3 class="mt-3">Comments</h3>
        {% load commenttree %}
        {{ comments|commenttree }}
        <!--{% for comment in comments %}
        <div class="media position-relative border-bottom mt-2">
            <div class="media-body">
                <h5 class="mt-0">{{ comment.author }}</h5>
                <p>{{ comment.comment }}</p>
                {% if comment.level < 3 %}
                    <a href="/reply/comment/{{ comment.id }}/" class="stretched-link">Reply</a>
                {% endif %}
            </div>
        </div>
        {% endfor %}-->
        <h3 class="mt-3">Add new comment</h3>
        <form method='post' action='/post/{{ post.pk }}/addcomment/'>{% csrf_token %}
            {{ form|crispy }}
            <button class="btn btn-lg btn-primary btn-block mb-5" type="submit">Add</button>
        </form>
    </div>
{% endblock %}

{% block pagination %}
{% endblock %}